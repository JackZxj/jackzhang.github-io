<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#33363b">
    <meta name="msapplication-TileColor" content="#33363b">
    
    
    
    <meta name="keywords" content="Life, ARIA, Hexo">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#33363b">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="啊啊拉格朗日" type="application/atom+xml">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    <script defer src="/js/busuanzi.pure.mini.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>Golang学习笔记ch1 | 啊啊拉格朗日 - Hey! 似李！</title>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN" data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #33363b;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">啊啊拉格朗日</a></h1>
        <h2 class="subtitle">Hey! 似李！</h2>
      </div>
      <div class="logo">
        <img src="/images/mylogo.gif" alt="logo">
      </div>
    </div>
    
<nav id="nav" class="nav">
  <a id="nav-toggle" class="nav-toggle"><i class="fas fa-bars"></i></a>
  <ul id="menu">
    
    <li><a href="/">首页</a></li>
    
    <li><a href="/archives/">归档</a></li>
    
    <li><a href="/categories/">分类</a></li>
    
    <li><a href="/tags/">标签</a></li>
    
    <li><a href="/game/">Game</a></li>
    
  </ul>
</nav>


  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            
<div id="post" class="post">
  
  <article class="post-container card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://jzwontdie.xyz/2019/03/04/golang学习笔记ch1/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
       <meta itemprop="name" content="Jack Zhang">
       <meta itemprop="description" content="I am the bone of salted fish, <br/> fish is my body&salt is my blood.">
       <meta itemprop="image" content="/images/myavatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
       <meta itemprop="name" content="啊啊拉格朗日">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">Golang学习笔记ch1</h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-03-04T21:32:40+08:00">2019-03-04 21:32:40</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Golang/" itemprop="url" rel="index"><span itemprop="name">Golang</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      <p>太菜找不到工作了，愁愁愁愁愁。</p>
<p>看了一下字节跳动的招聘很多都是golang的岗位，新的独角兽果然就是敢于用新鲜事物。。。</p>
<p>本文只是个人的学习代码记录，仅供参考。</p>
<p>参考书籍：《Go程序设计语言》 【美】艾伦 A.A. 多诺万，布莱恩 W. 柯尼汉 著，李道兵、高博、旁向才等译 机械工业出版社 2017年</p>
<a id="more"></a>
<h2 id="ch1-入门"><a href="#ch1-入门" class="headerlink" title="ch1 入门"></a>ch1 入门</h2><p>与我之前学过的教材不同，以往的教材往往第一章是语言介绍以及配置安装等杂项，本书的第一章是一些go程序实例，尽管还没有正式学习go语言，但是通过这些实例可以一窥golang的一些特性。书中入门的内容较多，各个实例我基本都一一手动敲入实现了，下面直接放代码。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><strong>ch1/hello.go</strong><br><figure class="highlight Golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><code class="hljs Golang"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>  <span class="hljs-string">"fmt"</span><br>  <span class="hljs-string">"unsafe"</span><br>  <span class="hljs-string">"os"</span><br>  <span class="hljs-string">"strings"</span><br>  <span class="hljs-string">"bufio"</span><br>)<br><br><span class="hljs-comment">//定义一个函数类型</span><br><span class="hljs-keyword">type</span> callb <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(<span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span><br><br>//测试函数回调函数<br><span class="hljs-title">func</span> <span class="hljs-title">testCallBack</span><span class="hljs-params">(x <span class="hljs-keyword">int</span>, f callb)</span></span> &#123;<br>  fmt.Print(<span class="hljs-string">"testCallBack:"</span>)<br>  f(x)<br>  fmt.Println()<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">callBack</span><span class="hljs-params">(x <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;<br>  fmt.Print(<span class="hljs-string">"huidiao:"</span>, x, <span class="hljs-string">"\n"</span>)<br>  <span class="hljs-keyword">return</span> x<br>&#125;<br><br><span class="hljs-comment">//数组传参测试</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getLen</span><span class="hljs-params">(p []<span class="hljs-keyword">int</span>)</span></span> &#123;<br>  fmt.Println(<span class="hljs-string">"无长度"</span>, <span class="hljs-built_in">len</span>(p))<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getLen2</span><span class="hljs-params">(p [3]<span class="hljs-keyword">int</span>)</span></span> &#123;<br>  <span class="hljs-comment">//注意两个输出除了换行外还有空格的区别</span><br>  fmt.Println(<span class="hljs-string">"len2:"</span>,<span class="hljs-built_in">len</span>(p))<br>  fmt.Print(<span class="hljs-string">"len:"</span>,<span class="hljs-built_in">len</span>(p))<br>&#125;<br><br><span class="hljs-comment">//测试多返值</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">MultiReturn</span><span class="hljs-params">()</span> <span class="hljs-params">(<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>)</span></span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span><br>&#125;<br><br><span class="hljs-comment">//高级版foreach——range</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">rangeTest</span><span class="hljs-params">()</span></span> &#123;<br>  fmt.Print(<span class="hljs-string">"\n*************** rangeTest Start ***************\n"</span>)<br>  nums := []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">11</span>, <span class="hljs-number">22</span>, <span class="hljs-number">33</span>, <span class="hljs-number">44</span>, <span class="hljs-number">55</span>&#125;<br>  kvs := <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>&#123;<span class="hljs-string">"a"</span> : <span class="hljs-string">"apple"</span>, <span class="hljs-string">"b"</span> : <span class="hljs-string">"banana"</span>&#125;<br>  <span class="hljs-keyword">var</span> sum, sumt <span class="hljs-keyword">int</span><br>  <span class="hljs-comment">//两种缺省index</span><br>  <span class="hljs-keyword">for</span> _, num := <span class="hljs-keyword">range</span> nums &#123;<br>    sum += num<br>  &#125;<br>  <span class="hljs-keyword">for</span> num := <span class="hljs-keyword">range</span> nums &#123;<br>    <span class="hljs-keyword">if</span> num != <span class="hljs-number">0</span> &#123;<br>      sumt++;<br>    &#125;<br>  &#125;<br>  fmt.Printf(<span class="hljs-string">"rangeTest sum:%d, sumt:%d\n"</span>, sum, sumt)<br>  <span class="hljs-comment">//index测试</span><br>  <span class="hljs-keyword">for</span> i, num := <span class="hljs-keyword">range</span> <span class="hljs-string">"我是初学者golang is 6, u too"</span> &#123;<br>    <span class="hljs-keyword">if</span> num == <span class="hljs-string">'是'</span> &#123;<br>      fmt.Printf(<span class="hljs-string">"6是第%d个元素\n"</span>, i + <span class="hljs-number">1</span>)<br>      <span class="hljs-keyword">break</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">//用range测试遍历map</span><br>  <span class="hljs-keyword">for</span> i, v := <span class="hljs-keyword">range</span> kvs &#123;<br>    fmt.Printf(<span class="hljs-string">"%s -&gt; %s\n"</span>, i, v)<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//map测试</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">mapTest</span><span class="hljs-params">()</span></span> &#123;<br>  fmt.Print(<span class="hljs-string">"\n*************** mapTest Start ***************\n"</span>)<br><br>  <span class="hljs-comment">//定义map变量，无初始化,默认为nil</span><br>  <span class="hljs-keyword">var</span> numMap <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span><br>  <span class="hljs-comment">//使用make函数初始化map变量，此时map被创建，长度为0</span><br>  numMap = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>)<br><br>  <span class="hljs-comment">// map的声明方式</span><br>  numMap[ <span class="hljs-string">"1"</span> ] = <span class="hljs-string">"111"</span><br>  numMap[ <span class="hljs-string">"2"</span> ] = <span class="hljs-string">"222"</span><br>  numMap[ <span class="hljs-string">"3"</span> ] = <span class="hljs-string">"333"</span><br><br>  <span class="hljs-comment">//使用range遍历map</span><br>  <span class="hljs-keyword">for</span> s := <span class="hljs-keyword">range</span> numMap &#123;<br>    fmt.Printf(<span class="hljs-string">"%s is %s\n"</span>, s, numMap[s])<br>  &#125;<br>  <span class="hljs-comment">//返回的值为mapName[key]的值以及是否查询到该值，查询不到时返回为 map类型的初始化值和false</span><br>  x, y := numMap[<span class="hljs-string">"1"</span>]<br>  a, b := numMap[<span class="hljs-string">"4"</span>]<br>  fmt.Printf(<span class="hljs-string">"%s is %s, %s is %s\n"</span>, x, y, a, b)<br><br>  <span class="hljs-comment">//delete方法</span><br>  <span class="hljs-built_in">delete</span>(numMap, <span class="hljs-string">"1"</span>)<br>  x, y = numMap[<span class="hljs-string">"1"</span>]<br>  fmt.Printf(<span class="hljs-string">"after delete, %s is %s\n"</span>, x, y)<br>&#125;<br><br><span class="hljs-comment">//类型转换测试</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">typeChange</span><span class="hljs-params">()</span></span> &#123;<br>  fmt.Print(<span class="hljs-string">"\n*************** typeChange Start ***************\n"</span>)<br><br>  x := <span class="hljs-number">12.51</span>  <span class="hljs-comment">//这样声明默认是float64类型</span><br>  y := <span class="hljs-number">3</span>    <span class="hljs-comment">//默认为int类型</span><br>  <span class="hljs-keyword">var</span> z <span class="hljs-keyword">float64</span><br>  <span class="hljs-comment">//缺少类型自动转换，因此需要手动强制转换，以下表达式为错误</span><br>  <span class="hljs-comment">//z = x / y</span><br>  <span class="hljs-comment">//float和double也不是自动转换</span><br>  <span class="hljs-comment">//z = x / float32(y)</span><br>  <span class="hljs-comment">//正确写法</span><br>  z = x / <span class="hljs-keyword">float64</span>(y)<br>  fmt.Printf(<span class="hljs-string">"x is %T,y is %T,z=%.3f\n"</span>, x, y, z)<br><br>  <span class="hljs-comment">//go的int类型根据系统判断，系统为32位则为int32，64位为int64</span><br>  <span class="hljs-keyword">var</span> a <span class="hljs-keyword">int</span> = <span class="hljs-number">111</span><br>  <span class="hljs-keyword">var</span> b <span class="hljs-keyword">int32</span> = <span class="hljs-number">222</span><br>  <span class="hljs-comment">//int 和 int32并不是同一种类型，不能加减，因此下面是错误</span><br>  <span class="hljs-comment">//var c int = a + b</span><br>  <span class="hljs-keyword">var</span> c <span class="hljs-keyword">int32</span> = <span class="hljs-keyword">int32</span>(a) + b<br>  <span class="hljs-keyword">var</span> d <span class="hljs-keyword">int64</span> = <span class="hljs-number">444</span><br>  <span class="hljs-comment">//因为int根据系统判断，就算在64位系统上也不能直接相加，因此下面报错</span><br>  <span class="hljs-comment">//var e = d + a</span><br>  e := <span class="hljs-keyword">int</span>(d) + a<br>  fmt.Printf(<span class="hljs-string">"a is %T, len is %d\nb is %T, len is %d\nc=%d\ne=%d\n"</span>, a, unsafe.Sizeof(a), b, unsafe.Sizeof(b), c, e)<br>&#125;<br><br><span class="hljs-comment">//输入测试，在运行时输入参数</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">inputTest</span><span class="hljs-params">()</span></span> &#123;<br>  fmt.Println(<span class="hljs-string">"\n******* inputTest ******\n"</span>)<br>  <span class="hljs-comment">//下面两种输出结果相同（无[]包住）</span><br>  <span class="hljs-comment">//手动输出</span><br>  <span class="hljs-comment">//os.Args[0]为编译生成的exe的路径</span><br>  s, sep := <span class="hljs-string">""</span>, <span class="hljs-string">" "</span><br>  <span class="hljs-keyword">for</span> _, str := <span class="hljs-keyword">range</span> os.Args[ : ] &#123;<br>    s += str + sep<br>  &#125;<br>  fmt.Println(s)<br><br>  <span class="hljs-comment">//使用join方法</span><br>  fmt.Println(strings.Join(os.Args[ : ], <span class="hljs-string">" "</span>))<br><br>  <span class="hljs-comment">//下面两种输出结果是一样的（有[]包住）</span><br>  <span class="hljs-comment">//无格式输出（适用于slice类型）</span><br>  fmt.Println(os.Args[<span class="hljs-number">1</span> : ])<br><br>  <span class="hljs-comment">//格式化输出</span><br>  fmt.Printf(<span class="hljs-string">"%v\n"</span>, os.Args[<span class="hljs-number">1</span> : ])<br>&#125;<br><br><span class="hljs-comment">//出入测试，采用流输入</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">inputTest2</span><span class="hljs-params">()</span></span> &#123;<br>  fmt.Println(<span class="hljs-string">"\n********** inputTest2(可能会中断退出，原因不明) ************\n"</span>)<br>  counts := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>] <span class="hljs-keyword">int</span>)<br>  input := bufio.NewScanner(os.Stdin)<br>  <span class="hljs-keyword">for</span> input.Scan() &#123;<br>    counts[input.Text()]++<br>  &#125;<br>  <span class="hljs-keyword">for</span> s, i := <span class="hljs-keyword">range</span> counts &#123;<br>    fmt.Printf(<span class="hljs-string">"%s -&gt; %d\n"</span>, s, i)<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>  y := <span class="hljs-number">111</span><br>  fmt.Print(<span class="hljs-string">"hello"</span>, y, <span class="hljs-string">"\n"</span>)<br>  <span class="hljs-keyword">var</span> x = []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;<br>  fmt.Printf(<span class="hljs-string">"%v\n"</span>, x)<br>  fmt.Print(<span class="hljs-string">"ooo\n"</span>)<br>  testCallBack(y, callBack)<br>  testCallBack(y, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(x <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;<br>    fmt.Print(<span class="hljs-string">"回调:"</span>, x, <span class="hljs-string">"\n"</span>)<br>    <span class="hljs-keyword">return</span> x<br>  &#125;)<br>  getLen(x)<br>  <span class="hljs-comment">//getLen2(x) //调用失败无法调用定长</span><br>  xx := [<span class="hljs-number">3</span>]<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>&#125;<br>  getLen2(xx)<br>  _, m1, m2 := MultiReturn()<br>  fmt.Println(<span class="hljs-string">"\nm1,m2为："</span>, m1, m2)<br>  rangeTest()<br>  <span class="hljs-comment">//字符串长度问题</span><br>  fmt.Printf(<span class="hljs-string">"\n****** 字符串长度测试 ********\n“ni”的长度为%d,“我”的长度为%d\n"</span>, <span class="hljs-built_in">len</span>(<span class="hljs-string">"ni"</span>), <span class="hljs-built_in">len</span>(<span class="hljs-string">"我"</span>))<br>  mapTest()<br>  typeChange()<br><br>  inputTest()<br><br>  inputTest2()<br>&#125;<br></code></pre></td></tr></table></figure></p>
<p><strong>ch1/fetchTest.go</strong><br><figure class="highlight Golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs Golang"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>  <span class="hljs-string">"fmt"</span><br>  <span class="hljs-comment">//"io/ioutil"</span><br>  <span class="hljs-string">"io"</span><br>  <span class="hljs-string">"net/http"</span><br>  <span class="hljs-string">"os"</span><br>  <span class="hljs-string">"strings"</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>  <span class="hljs-keyword">for</span> _, url := <span class="hljs-keyword">range</span> os.Args[<span class="hljs-number">1</span> : ] &#123;<br>    <span class="hljs-comment">// 自动补充http前缀</span><br>    <span class="hljs-keyword">if</span> !(strings.HasPrefix(url, <span class="hljs-string">"http://"</span>)) || !(strings.HasPrefix(url, <span class="hljs-string">"https://"</span>)) &#123;<br>      url = <span class="hljs-string">"http://"</span> + url<br>    &#125;<br>    resp, err := http.Get(url)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>      fmt.Fprintf(os.Stderr, <span class="hljs-string">"fetch: %v\n"</span>, err)<br>      os.Exit(<span class="hljs-number">1</span>)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// 输出状态码</span><br>      fmt.Println(<span class="hljs-string">"state code:"</span>, resp.Status)<br>    &#125;<br>    <span class="hljs-comment">// 两种读取方式，第一种为一次性读取完整个页面后才输出</span><br>    <span class="hljs-comment">// b, err := ioutil.ReadAll(resp.Body)</span><br>    <span class="hljs-comment">//第二种为按照web页面传输的数据来输出</span><br>    b, err := io.Copy(os.Stdout, resp.Body)<br>    resp.Body.Close()<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>      fmt.Fprintf(os.Stderr, <span class="hljs-string">"fetch: reading %s : %v\n"</span>, url, err)<br>      os.Exit(<span class="hljs-number">1</span>)<br>    &#125;<br>    fmt.Printf(<span class="hljs-string">"%s"</span>, b)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p>
<p><strong>ch1/fetchMulti.go</strong><br><figure class="highlight Golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs Golang"><span class="hljs-keyword">package</span> main <br><br><span class="hljs-keyword">import</span> (<br>  <span class="hljs-string">"fmt"</span><br>  <span class="hljs-string">"io"</span><br>  <span class="hljs-string">"io/ioutil"</span><br>  <span class="hljs-string">"net/http"</span><br>  <span class="hljs-string">"os"</span><br>  <span class="hljs-string">"time"</span><br>  <span class="hljs-string">"strings"</span><br>)<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>  start := time.Now()<br>  <span class="hljs-comment">//声明通道变量</span><br>  ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">string</span>)<br>  <span class="hljs-keyword">for</span> _, url := <span class="hljs-keyword">range</span> os.Args[<span class="hljs-number">1</span> : ] &#123;<br>    <span class="hljs-keyword">if</span> !(strings.HasPrefix(url, <span class="hljs-string">"http://"</span>)) || !(strings.HasPrefix(url, <span class="hljs-string">"https://"</span>)) &#123;<br>      url = <span class="hljs-string">"http://"</span> + url<br>    &#125;<br>    <span class="hljs-keyword">go</span> fetch(url, ch)   <span class="hljs-comment">//启动一个goruntime</span><br>  &#125;<br>  <span class="hljs-keyword">for</span> <span class="hljs-keyword">range</span> os.Args[<span class="hljs-number">1</span> : ] &#123;<br>    fmt.Println(&lt;- ch)    <span class="hljs-comment">//从通道接收</span><br>  &#125;<br>  fmt.Printf(<span class="hljs-string">"%.2fs elapsed \n"</span>, time.Since(start).Seconds())<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetch</span><span class="hljs-params">(url <span class="hljs-keyword">string</span>, ch <span class="hljs-keyword">chan</span>&lt;- <span class="hljs-keyword">string</span>)</span></span> &#123;<br>  start := time.Now()<br>  resp, err := http.Get(url)<br>  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>    ch &lt;- fmt.Sprint(err) <span class="hljs-comment">//发送到通道ch、</span><br>    <span class="hljs-keyword">return</span><br>  &#125;<br><br>  nbytes, err := io.Copy(ioutil.Discard, resp.Body)<br>  resp.Body.Close()     <span class="hljs-comment">//关闭页面</span><br>  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>    ch &lt;- fmt.Sprintf(<span class="hljs-string">"While reading %s : %v"</span>, url, err)<br>    <span class="hljs-keyword">return</span><br>  &#125;<br>  secs := time.Since(start).Seconds()<br>  ch &lt;- fmt.Sprintf(<span class="hljs-string">"%.2fs\t\t%7d\t\t%s"</span>, secs, nbytes, url)<br>&#125;<br></code></pre></td></tr></table></figure></p>
<p><strong>ch1/server1.go</strong><br><figure class="highlight Golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><code class="hljs Golang"><span class="hljs-keyword">package</span> main <br><br><span class="hljs-keyword">import</span> (<br>  <span class="hljs-string">"fmt"</span><br>  <span class="hljs-string">"log"</span><br>  <span class="hljs-string">"net/http"</span><br>  <span class="hljs-string">"sync"</span><br><br>  <span class="hljs-string">"image"</span><br>  <span class="hljs-string">"image/color"</span><br>  <span class="hljs-string">"image/gif"</span><br>  <span class="hljs-string">"io"</span><br>  <span class="hljs-string">"math"</span><br>  <span class="hljs-string">"math/rand"</span><br><br>  <span class="hljs-string">"strconv"</span><br>)<br><br><span class="hljs-keyword">var</span> mu sync.Mutex     <span class="hljs-comment">//信号量,用于线程锁（pv操作）</span><br><span class="hljs-keyword">var</span> count <span class="hljs-keyword">int</span>     <span class="hljs-comment">//全局变量，计数访问次数</span><br><br><span class="hljs-keyword">var</span> palette = []color.Color&#123;color.Black, color.RGBA&#123;<span class="hljs-number">0x00</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0xFF</span>&#125;, color.RGBA&#123;<span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0xFF</span>&#125;&#125;<br><br><span class="hljs-keyword">const</span> (<br>  blackIndex = <span class="hljs-number">0</span>    <span class="hljs-comment">//画板第1种颜色</span><br>  greenIndex = <span class="hljs-number">1</span>    <span class="hljs-comment">//画板第2种颜色</span><br>  blueIndex = <span class="hljs-number">2</span>   <span class="hljs-comment">//画板第3种颜色</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>  fmt.Print(<span class="hljs-string">"start\n"</span>)<br>  http.HandleFunc(<span class="hljs-string">"/"</span>, handler)               <span class="hljs-comment">//设置处理函数</span><br>  http.HandleFunc(<span class="hljs-string">"/count"</span>, counter)              <span class="hljs-comment">//设置处理函数</span><br>  http.HandleFunc(<span class="hljs-string">"/show"</span>, shower)              <span class="hljs-comment">//设置处理函数</span><br>  <span class="hljs-comment">//可以直接在函数种声明</span><br>  http.HandleFunc(<span class="hljs-string">"/lisaru"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;<br>    lisaru(w)<br>  &#125;)<br>  <span class="hljs-comment">//在url里输入参数改变丽萨如图的样式，可以修改4个参数，不同参数用&amp;分割，如：</span><br>  <span class="hljs-comment">//http://localhost:8000/newlisaru?nframes=100&amp;cycles=5&amp;size=200</span><br>  http.HandleFunc(<span class="hljs-string">"/newlisaru"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;<br>    req := r.URL.Query()<br><br>    auto := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>] <span class="hljs-keyword">string</span>)<br>    auto[<span class="hljs-string">"cycles"</span>]  = <span class="hljs-string">"5"</span>     <span class="hljs-comment">//x震荡器变化个数</span><br>    <span class="hljs-comment">// auto["res"]    = "0.001"   //角度分辨率</span><br>    auto[<span class="hljs-string">"size"</span>]  = <span class="hljs-string">"100"</span>     <span class="hljs-comment">//画布为-size ~ +size</span><br>    auto[<span class="hljs-string">"nframes"</span>] = <span class="hljs-string">"64"</span>      <span class="hljs-comment">//gif中共包含64帧</span><br>    auto[<span class="hljs-string">"delay"</span>] = <span class="hljs-string">"8"</span>     <span class="hljs-comment">//10ms的帧延时</span><br>    <span class="hljs-keyword">for</span> k, _ := <span class="hljs-keyword">range</span> auto &#123;<br>      <span class="hljs-keyword">if</span> vv := req.Get(k); vv != <span class="hljs-string">""</span> &#123;<br>        auto[k] = vv<br>      &#125;<br>    &#125;<br>    cycles, _ := strconv.Atoi(auto[<span class="hljs-string">"cycles"</span>])<br>    size, _ := strconv.Atoi(auto[<span class="hljs-string">"size"</span>])<br>    nframes, _ := strconv.Atoi(auto[<span class="hljs-string">"nframes"</span>])<br>    delay, _ := strconv.Atoi(auto[<span class="hljs-string">"delay"</span>])<br><br>    newlisaru(w, cycles, size, nframes, delay)<br>  &#125;)<br><br><br>  log.Fatal(http.ListenAndServe(<span class="hljs-string">"localhost:8000"</span>, <span class="hljs-literal">nil</span>))   <span class="hljs-comment">//设置监听端口</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;<br>  <span class="hljs-comment">//当访问localhost:8000/asd时，页面显示url.path = "/asd"</span><br>  fmt.Fprintf(w, <span class="hljs-string">"url.path = %q\n"</span>, r.URL.Path)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">counter</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;<br>  mu.Lock()<br>  count++;<br>  fmt.Fprintf(w, <span class="hljs-string">"count : %d"</span>, count)<br>  mu.Unlock()<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">shower</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;<br>  fmt.Fprintf(w, <span class="hljs-string">"%s \t %s \t %s\n"</span>, r.Method, r.URL, r.Proto)<br>  <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> r.Header &#123;<br>    fmt.Fprintf(w, <span class="hljs-string">"Header[%q] = %q\n"</span>, k, v)<br>  &#125;<br>  fmt.Fprintf(w, <span class="hljs-string">"host = %q\n"</span>, r.Host)<br>  fmt.Fprintf(w, <span class="hljs-string">"remoteAddr = %q\n"</span>, r.RemoteAddr)<br>  <span class="hljs-keyword">if</span> err := r.ParseForm(); err != <span class="hljs-literal">nil</span> &#123;<br>    log.Print(err)<br>  &#125;<br>  <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> r.Form &#123;<br>    fmt.Fprintf(w, <span class="hljs-string">"Form[%q] = %q\n"</span>, k, v)<br>  &#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">lisaru</span><span class="hljs-params">(out io.Writer)</span></span> &#123;<br>  <span class="hljs-keyword">const</span> (<br>    cycles  = <span class="hljs-number">5</span>     <span class="hljs-comment">//x震荡器变化个数</span><br>    res   = <span class="hljs-number">0.001</span>   <span class="hljs-comment">//角度分辨率</span><br>    size  = <span class="hljs-number">100</span>   <span class="hljs-comment">//画布为-size ~ +size</span><br>    nframes = <span class="hljs-number">64</span>    <span class="hljs-comment">//gif中共包含64帧</span><br>    delay = <span class="hljs-number">8</span>     <span class="hljs-comment">//10ms的帧延时</span><br>  )<br><br>  freq := rand.Float64() * <span class="hljs-number">3.0</span>  <span class="hljs-comment">//y的震荡频率</span><br>  anim := gif.GIF&#123;LoopCount : nframes&#125;  <span class="hljs-comment">//GIF结构体初始化属性值</span><br>  phase := <span class="hljs-number">0.0</span>          <span class="hljs-comment">//偏移量</span><br>  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; nframes; i++ &#123;<br>    rect := image.Rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span> * size + <span class="hljs-number">1</span>, <span class="hljs-number">2</span> * size + <span class="hljs-number">1</span>)<br>    img := image.NewPaletted(rect, palette)<br>    <span class="hljs-keyword">for</span> t := <span class="hljs-number">0.0</span>; t &lt; cycles * <span class="hljs-number">2</span> * math.Pi; t += res &#123;<br>      x := math.Sin(t)<br>      y := math.Sin(t * freq + phase)<br>      img.SetColorIndex(size + <span class="hljs-keyword">int</span>(x * size + <span class="hljs-number">0.5</span>), size + <span class="hljs-keyword">int</span>(y * size + <span class="hljs-number">0.5</span>), greenIndex)<br>    &#125;<br>    <span class="hljs-keyword">for</span> p := <span class="hljs-number">0</span>; p &lt; <span class="hljs-number">2</span> * size + <span class="hljs-number">1</span>; p++ &#123;<br>      img.SetColorIndex(p, size, blueIndex)<br>      img.SetColorIndex(size, p, blueIndex)<br>    &#125;<br>    phase += <span class="hljs-number">0.1</span><br>    anim.Delay = <span class="hljs-built_in">append</span>(anim.Delay, delay)<br>    anim.Image = <span class="hljs-built_in">append</span>(anim.Image, img)<br>  &#125;<br>  gif.EncodeAll(out, &amp;anim)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">newlisaru</span><span class="hljs-params">(out io.Writer, cycles, size, nframes, delay <span class="hljs-keyword">int</span>)</span></span> &#123;<br>  <span class="hljs-comment">/*<br>  const (<br>    cycles  = 5     //x震荡器变化个数<br>    res   = 0.001   //角度分辨率<br>    size  = 100   //画布为-size ~ +size<br>    nframes = 64    //gif中共包含64帧<br>    delay = 8     //10ms的帧延时<br>  )<br>  */</span><br>  <span class="hljs-keyword">const</span> res = <span class="hljs-number">0.001</span><br><br>  freq := rand.Float64() * <span class="hljs-number">3.0</span>  <span class="hljs-comment">//y的震荡频率</span><br>  anim := gif.GIF&#123;LoopCount : nframes&#125;  <span class="hljs-comment">//GIF结构体初始化属性值</span><br>  phase := <span class="hljs-number">0.0</span>          <span class="hljs-comment">//偏移量</span><br>  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; nframes; i++ &#123;<br>    rect := image.Rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span> * size + <span class="hljs-number">1</span>, <span class="hljs-number">2</span> * size + <span class="hljs-number">1</span>)<br>    img := image.NewPaletted(rect, palette)<br>    <span class="hljs-keyword">for</span> t := <span class="hljs-number">0.0</span>; t &lt; <span class="hljs-keyword">float64</span>(cycles) * <span class="hljs-number">2</span> * math.Pi; t += res &#123;<br>      x := math.Sin(t)<br>      y := math.Sin(t * freq + phase)<br>      img.SetColorIndex(size + <span class="hljs-keyword">int</span>(x * <span class="hljs-keyword">float64</span>(size) + <span class="hljs-number">0.5</span>), size + <span class="hljs-keyword">int</span>(y * <span class="hljs-keyword">float64</span>(size) + <span class="hljs-number">0.5</span>), greenIndex)<br>    &#125;<br>    <span class="hljs-keyword">for</span> p := <span class="hljs-number">0</span>; p &lt; <span class="hljs-number">2</span> * size + <span class="hljs-number">1</span>; p++ &#123;<br>      img.SetColorIndex(p, size, blueIndex)<br>      img.SetColorIndex(size, p, blueIndex)<br>    &#125;<br>    phase += <span class="hljs-number">0.1</span><br>    anim.Delay = <span class="hljs-built_in">append</span>(anim.Delay, delay)<br>    anim.Image = <span class="hljs-built_in">append</span>(anim.Image, img)<br>  &#125;<br>  gif.EncodeAll(out, &amp;anim)<br>&#125;<br></code></pre></td></tr></table></figure></p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>因为不是教程向的，仅仅是我的个人学习笔记，代码写的不好请不要在意。</p>
<p>请监督我继续写下去（如果有人看的话hhh）</p>
<p>有问题欢迎指出。</p>
<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><p>可供参考的资料：<br><a href="https://studygolang.com/pkgdoc" target="_blank" rel="noopener">Golang标准库文档</a></p>

    </main>
    <footer class="post-footer">
      
      
      <div class="post-tags">
        
        
        
        
        <a class="post-tag button" href="/tags/Golang/" style="background: #fc6423;" rel="tag"><i class="fas fa-tags"></i>Golang</a>
        
        <a class="post-tag button" href="/tags/开发入门/" style="background: #a3bb54;" rel="tag"><i class="fas fa-tags"></i>开发入门</a>
        
        <a class="post-tag button" href="/tags/HelloWorld/" style="background: #47aaff;" rel="tag"><i class="fas fa-tags"></i>HelloWorld</a>
        
      </div>
      
    </footer>
  </article>
  
  
<div class="reward" id="reward">
  <p>坚持原创技术分享，您的支持是我前进的动力！</p>
  <button id="reward-button" class="button" disable="enable">打赏</button>
  <div id="qr" class="qr" style="display: none;">
    
    
    
  </div>
</div>


  
  
  <div class="post-nav">
    <div class="post-nav-next post-nav-item">
      
      <a href="/2019/02/19/计算机网络常用网络协议合集/" rel="next" title="计算机网络常用网络协议合集"><i class="fas fa-angle-left"></i><span class="nav-title">计算机网络常用网络协议合集</span></a>
      
    </div>
    <div class="post-nav-prev post-nav-item">
      
      <a href="/2019/03/06/golang学习笔记ch2/" rel="prev" title="Golang学习笔记ch2"><span class="nav-title">Golang学习笔记ch2</span><i class="fas fa-angle-right"></i></a>
      
    </div>
  </div>
  
  
  

<div class="comments" id="comments">
  
  
  <div class="commentjs" id="comment-thread"></div>
  <link rel="stylesheet" href="/css/commentjs.css">
  <script defer type="text/javascript" src="/js/marked.min.js"></script>
  <script defer type="text/javascript" src="/js/timeago.min.js"></script>
  <script defer type="text/javascript" src="/js/highlight.min.js"></script>
  <script defer type="text/javascript" src="/js/commentjs.js"></script>
  <script type="text/javascript">
  $(document).ready(function () {
    getComments({
      "type": "github",
      "user": "JackZxj",
      "repo": "jackzhang.github-io",
      "client_id": "305140c96dccb0182657",
      "client_secret": "cbd975d0c1a3a2cb86038d3d12a693e69fb7a219",
      "no_comment": "这个页面还没有评论，现在就去评论吧！",
      "go_to_comment": "去评论",
      "issue_title": "Golang学习笔记ch1",
      "btn_class": "button",
      "comments_target": "#comment-thread"
    });
    marked.setOptions({
      "highlight": function (code, lang) {
        return hljs.highlightAuto(code).value;
      }
    });
    function mark() {
      var markdowns = document.getElementsByClassName("markdown");
      for (var i = 0; i < markdowns.length; ++i){
        if (markdowns[i].innerHTML) {
          markdowns[i].innerHTML = marked(markdowns[i].innerHTML);
        }
      }
    }
    window.addEventListener("DOMContentLoaded", mark, false);
    window.addEventListener("load", mark, false);
  });
  </script>
  
  
</div>



  
</div>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/sidebar_background.png);">
  
  <div class="search">
    <div class="form-group">
      <i class="fas fa-search"></i><input type="search" id="search-input" name="q" results="0" placeholder="搜索" class="form-control">
    </div>
  </div>
  <div class="search-result-box" id="search-result"></div>
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="/images/myavatar.png" alt="Jack Zhang">
  
  <h1 class="author-name">Jack Zhang</h1>
  <h2 class="author-description"> I am the bone of salted fish, <br> fish is my body&salt is my blood.</h2>
  <div class="site-count">
    
    <div class="archives-count">
      <div class="site-count-title">归档</div>
      <div><a href="/archives/">18</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="categories-count">
      <div class="site-count-title">分类</div>
      <div><a href="/categories/">12</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="tags-count">
      <div class="site-count-title">标签</div>
      <div><a href="/tags/">29</a></div>
    </div>
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="/atom.xml"><i class="fas fa-rss"></i>RSS</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    




<hr>
<div class="post-toc sidebar-item" id="toc-div">
  <div><i class="fas fa-list-ol"></i>文章目录</div>
  <div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ch1-入门"><span class="toc-text">ch1 入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码"><span class="toc-text">代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结语"><span class="toc-text">结语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#补充"><span class="toc-text">补充</span></a></li></ol></div>
</div>



    
    
    
<hr>
<div class="social-link sidebar-item">
  <div><i class="far fa-address-card"></i>社交链接<p></p></div>
  <ul>
    
    <li><i class="fas fa-envelope"></i><a href="mailto:x_jackzhang@qq.com" target="_blank">E-Mail</a></li>
    
    <li><i class="fab fa-github"></i><a href="https://github.com/JackZxj" target="_blank">GitHub</a></li>
    
  </ul>
</div>


    
    
    
<hr>
<div class="blogroll sidebar-item">
  <div><i class="fas fa-link"></i>友情链接</div>
  <ul>
    
    <li><a href="https://github.com/" target="_blank">GitHub</a></li>
    
    <li><a href="https://sh.alynx.xyz/" target="_blank">模板作者~</a></li>
    
  </ul>
</div>


    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #33363b;">
  <div class="container">
    <div class="back-to-top">
      <a id="back-to-top"><i class="fas fa-angle-double-up"></i></a>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">Jack Zhang</span><span class="year"><i class="far fa-copyright"></i>2018 - 2019</span>
        </div>
        
        
<div class="busuanzi">
  <span id="busuanzi_container_site_pv"><i class="fas fa-eye"></i><span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv"><i class="fas fa-user"></i><span id="busuanzi_value_site_uv"></span></span><span id="busuanzi_container_page_pv"><i class="far fa-file-alt"></i><span id="busuanzi_value_page_pv"></span></span>
</div>


        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          托管于<i class="fab fa-github-alt"></i><a href="https://pages.github.com/" target="_blank">GitHub Pages</a>
          
        </div>
        <div class="powered-by">
          由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动 | 主题 <a href="https://github.com/AlynxZhou/hexo-theme-aria/" target="_blank">ARIA</a>
        </div>
      </div>
    </div>
  </div>
</footer>


  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":200,"height":400,"hOffset":150,"vOffset":-80},"mobile":{"show":true},"react":{"opacityDefault":0.5,"opacityOnHover":0.9},"log":false});</script></body>
</html>
